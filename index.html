<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>W-AF Risk Hub</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1d4ed8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .calculator-page { display: none; }
        .active-page { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Segmented Toggle Styles matching original PRE-TTR */
        .toggle-btn { transition: all 0.2s ease; background-color: #e2e8f0; color: #1e293b; border: 1px solid transparent; white-space: nowrap; }
        .toggle-btn.active { background-color: #14b8a6; color: white; border-color: #14b8a6; }
        
        .modal { transition: opacity 0.25s ease; }
        .modal-content { transition: transform 0.25s ease; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-sky-100 text-slate-700 min-h-screen flex flex-col items-center justify-center p-4 selection:bg-blue-500 selection:text-white">

    <!-- HOME MENU HUB -->
    <div id="main-menu" class="active-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-8 text-center border-b border-slate-200 bg-white">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 uppercase tracking-tight">W-AF Risk Hub</h1>
            <p class="mt-2 text-base text-slate-600 font-medium italic uppercase">Clinical Decision Support Tools</p>
        </header>
        <div class="p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-4">
            <button onclick="showPage('prettr-page')" class="group p-6 border border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
                <h2 class="text-xl font-bold text-blue-800 group-hover:text-blue-600 uppercase">PRE-TTR Score</h2>
                <p class="text-sm text-slate-500 mt-1">Predicting TTR ≥ 70% at 6 months</p>
            </button>
            <button onclick="showPage('wstab6-page')" class="group p-6 border border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
                <h2 class="text-xl font-bold text-blue-800 group-hover:text-blue-600 uppercase">W-STAB 6</h2>
                <p class="text-sm text-slate-500 mt-1">INR Stabilization at 6 months</p>
            </button>
            <button onclick="showPage('wstab12-page')" class="group p-6 border border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
                <h2 class="text-xl font-bold text-blue-800 group-hover:text-blue-600 uppercase">W-STAB 12</h2>
                <p class="text-sm text-slate-500 mt-1">INR Stabilization at 12 months</p>
            </button>
            <button onclick="showPage('stroke-page')" class="group p-6 border border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all text-left">
                <h2 class="text-xl font-bold text-red-800 group-hover:text-red-600 uppercase tracking-tight">CARIA<sub>2</sub></h2>
                <p class="text-sm text-slate-500 mt-1 font-semibold">Stroke risk score</p>
            </button>
            <button onclick="showPage('bleeding-page')" class="group p-6 border border-slate-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all text-left">
                <h2 class="text-xl font-bold text-orange-800 group-hover:text-orange-600 uppercase">FACT-RED</h2>
                <p class="text-sm text-slate-500 mt-1 font-semibold">Bleeding risk score</p>
            </button>
        </div>
        <footer class="p-4 text-center text-[10px] text-slate-400 border-t border-slate-100 uppercase tracking-widest">
            Sharifah Nadiah 2025 • Educational Tool
        </footer>
    </div>

    <!-- PRE-TTR SCORE (ORIGINAL MAINTAINED) -->
    <div id="prettr-page" class="calculator-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-6 md:p-8 text-center border-b border-slate-200 relative">
            <button onclick="showPage('main-menu')" class="absolute left-6 top-8 text-blue-600 hover:underline text-sm font-bold uppercase">&larr; Hub</button>
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 uppercase">PRE-TTR Score Calculator</h1>
            <p class="mt-2 text-base text-slate-600">
                <strong class="text-blue-700">Pre</strong>diction of Early <strong class="text-blue-700">T</strong>ime in <strong class="text-blue-700">T</strong>herapeutic <strong class="text-blue-700">R</strong>ange
            </p>
            <p class="mt-4 text-sm text-slate-500">
                <strong class="text-amber-500">Disclaimer:</strong> This is an educational tool. The score is illustrative and <strong class="text-red-500">NOT</strong> a medical diagnosis. Always consult a healthcare professional.
            </p>
        </header>

        <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div id="prettr-inputs" class="lg:col-span-2 space-y-5" data-calc="prettr">
                <div class="flex justify-between items-center">
                    <span class="text-slate-600 font-medium">Diabetes Mellitus</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="dm"><button class="toggle-btn px-4 py-2" data-val="present">Yes <span class="text-slate-400 font-normal ml-1">0</span></button><button class="toggle-btn px-4 py-2" data-val="absent">No <span class="text-slate-400 font-normal ml-1">+1</span></button></div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-slate-600 font-medium">Prior ischemic stroke</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="stroke"><button class="toggle-btn px-4 py-2" data-val="yes">Yes <span class="text-slate-400 font-normal ml-1">0</span></button><button class="toggle-btn px-4 py-2" data-val="no">No <span class="text-slate-400 font-normal ml-1">+1</span></button></div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-slate-600 font-medium">Use of thyroid medication</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="thyroid"><button class="toggle-btn px-4 py-2" data-val="yes">Yes <span class="text-slate-400 font-normal ml-1">0</span></button><button class="toggle-btn px-4 py-2" data-val="no">No <span class="text-slate-400 font-normal ml-1">+2</span></button></div>
                </div>
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-2">
                        <span class="text-slate-600 font-medium">Initial warfarin dose</span>
                        <button onclick="openModal('doseInfoModal')" type="button" class="text-blue-500 hover:text-blue-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                        </button>
                    </div>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="dose"><button class="toggle-btn px-4 py-2" data-val="low">Low dose <span class="text-slate-400 font-normal ml-1">0</span></button><button class="toggle-btn px-4 py-2" data-val="high">High dose <span class="text-slate-400 font-normal ml-1">+1</span></button></div>
                </div>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0">
                    <span class="text-slate-600 font-medium text-sm">Total days to achieve first therapeutic INR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="days"><button class="toggle-btn px-3 py-2" data-val="14">≤ 14 days <span class="text-slate-400 font-normal ml-1">+1</span></button><button class="toggle-btn px-3 py-2" data-val="15">15 to 28 days <span class="text-slate-400 font-normal ml-1">+2</span></button><button class="toggle-btn px-3 py-2" data-val="28">> 28 days <span class="text-slate-400 font-normal ml-1">0</span></button></div>
                </div>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0">
                    <span class="text-slate-600 font-medium text-sm">Total dose of warfarin/week to reach 1st INR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="weekdose"><button class="toggle-btn px-4 py-2" data-val="20">≥ 20 mg/wk <span class="text-slate-400 font-normal ml-1">0</span></button><button class="toggle-btn px-4 py-2" data-val="less"> < 20 mg/wk <span class="text-slate-400 font-normal ml-1">+1</span></button></div>
                </div>
            </div>
            <div class="lg:col-span-1 bg-slate-50 rounded-lg p-6 flex flex-col justify-center items-center text-center border">
                <h3 class="font-semibold text-slate-500 uppercase tracking-wider text-xs">Total Score</h3>
                <div id="prettr-score" class="text-7xl font-bold text-slate-400 my-3">0</div>
                <div id="prettr-desc" class="font-semibold text-lg text-orange-600">Less likely TTR ≥ 70%</div>
                <p class="text-[10px] text-slate-500 mt-4 leading-tight">A score ≥ 5 suggests a higher likelihood of achieving TTR ≥ 70% within 6 months.</p>
            </div>
        </div>
    </div>

    <!-- CARIA2 STROKE -->
    <div id="stroke-page" class="calculator-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-6 md:p-8 text-center border-b border-slate-200 relative">
            <button onclick="showPage('main-menu')" class="absolute left-6 top-8 text-blue-600 hover:underline text-sm font-bold uppercase">&larr; Hub</button>
            <h1 class="text-3xl md:text-4xl font-bold text-red-700 uppercase tracking-tight">CARIA<sub>2</sub></h1>
            <p class="mt-1 text-base text-slate-600 font-bold italic">Stroke risk score</p>
            <p class="mt-4 text-sm text-slate-500">
                <strong class="text-amber-500">Disclaimer:</strong> This is an educational tool. The score is illustrative and <strong class="text-red-500">NOT</strong> a medical diagnosis. Always consult a healthcare professional.
            </p>
        </header>
        <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-4" data-calc="caria">
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Coronary artery disease</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="cad"><button class="toggle-btn px-4 py-2" data-val="yes">Yes (+1)</button><button class="toggle-btn px-4 py-2" data-val="no">No</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Age</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="age"><button class="toggle-btn px-4 py-2" data-val="60">≥ 60 years (+1)</button><button class="toggle-btn px-4 py-2" data-val="young">< 60 years</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Baseline eGFR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-[10px]" data-var="egfr"><button class="toggle-btn px-1 py-2" data-val="low">< 30 (+1)</button><button class="toggle-btn px-1 py-2" data-val="30">30-59</button><button class="toggle-btn px-1 py-2" data-val="high">≥ 60</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left leading-tight">INR stabilisation within 1 year</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-[10px]" data-var="stab"><button class="toggle-btn px-2 py-2" data-val="no">Not achieved (+1)</button><button class="toggle-btn px-2 py-2" data-val="yes">Achieved</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Bronchial asthma</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="asthma"><button class="toggle-btn px-4 py-2" data-val="yes">Yes (+2)</button><button class="toggle-btn px-4 py-2" data-val="no">No</button></div>
                </div>
            </div>
            <div class="lg:col-span-1 bg-slate-50 rounded-lg p-6 flex flex-col justify-center items-center text-center border">
                <h3 class="font-semibold text-slate-500 uppercase tracking-wider text-xs">Total Score</h3>
                <div id="caria-score" class="text-7xl font-bold text-slate-400 my-3">0</div>
                <div id="caria-desc" class="font-semibold text-lg">...</div>
                <p class="text-[10px] text-slate-500 mt-4 leading-tight font-medium">A total score of 2 or more suggests "Likely high stroke risk", while a score less than 2 suggests "Less likely stroke risk".</p>
            </div>
        </div>
    </div>

    <!-- FACT-RED BLEEDING -->
    <div id="bleeding-page" class="calculator-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-6 md:p-8 text-center border-b border-slate-200 relative">
            <button onclick="showPage('main-menu')" class="absolute left-6 top-8 text-blue-600 hover:underline text-sm font-bold uppercase">&larr; Hub</button>
            <h1 class="text-3xl md:text-4xl font-bold text-orange-700 uppercase tracking-tight">FACT-RED</h1>
            <p class="mt-1 text-base text-slate-600 font-bold italic">Bleeding risk score</p>
            <p class="mt-4 text-sm text-slate-500">
                <strong class="text-amber-500">Disclaimer:</strong> This is an educational tool. The score is illustrative and <strong class="text-red-500">NOT</strong> a medical diagnosis. Always consult a healthcare professional.
            </p>
        </header>
        <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-4" data-calc="factred">
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Gender</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="gender"><button class="toggle-btn px-4 py-2" data-val="1">Female (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">Male</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Antiplatelet drug use</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="anti"><button class="toggle-btn px-4 py-2" data-val="1">Yes (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">No</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left">Platelet < 240 x 10⁹/L</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="plat"><button class="toggle-btn px-4 py-2" data-val="1">Yes (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">No</button></div>
                </div>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0 text-left leading-tight"><span class="text-slate-600 font-medium text-xs">Total dose < 20mg/wk to reach 1st INR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="dose"><button class="toggle-btn px-4 py-2" data-val="1">Yes (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">No</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left">Renal impairment (CKD/ESRF)</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="renal"><button class="toggle-btn px-4 py-2" data-val="1">Yes (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">No</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left">Ethnicity</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="eth"><button class="toggle-btn px-1 py-2" data-val="0">Indian</button><button class="toggle-btn px-1 py-2" data-val="2">Malay (+2)</button><button class="toggle-btn px-1 py-2" data-val="3">Chinese (+3)</button><button class="toggle-btn px-1 py-2" data-val="1">Others (+1)</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left leading-tight">Dose regimen group</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="regimen"><button class="toggle-btn px-4 py-2" data-val="1">3-day loading (+1)</button><button class="toggle-btn px-4 py-2" data-val="0">Fixed dose</button></div>
                </div>
            </div>
            <div class="lg:col-span-1 bg-slate-50 rounded-lg p-6 flex flex-col justify-center items-center text-center border">
                <h3 class="font-semibold text-slate-500 uppercase tracking-wider text-xs">Total Score</h3>
                <div id="factred-score" class="text-7xl font-bold text-slate-400 my-3">0</div>
                <div id="factred-desc" class="font-semibold text-lg">...</div>
                <p class="text-[10px] text-slate-500 mt-4 leading-tight font-medium">A total score of 5 or more suggests "Likely high bleeding risk", while a score less than 5 suggests "Less likely bleeding risk".</p>
            </div>
        </div>
    </div>

    <!-- W-STAB 6 MONTHS -->
    <div id="wstab6-page" class="calculator-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-6 md:p-8 text-center border-b border-slate-200 relative">
            <button onclick="showPage('main-menu')" class="absolute left-6 top-8 text-blue-600 hover:underline text-sm font-bold uppercase">&larr; Hub</button>
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 uppercase">W-STAB 6 Score</h1>
            <p class="mt-2 text-base text-slate-600 italic font-bold leading-tight">INR Stabilisation at 6 Months</p>
            <p class="mt-4 text-sm text-slate-500">
                <strong class="text-amber-500">Disclaimer:</strong> This is an educational tool. The score is illustrative and <strong class="text-red-500">NOT</strong> a medical diagnosis. Always consult a healthcare professional.
            </p>
        </header>
        <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-4" data-calc="w6">
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Ethnicity</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-[10px]" data-var="eth"><button class="toggle-btn px-2 py-2" data-val="mal">Malay +1</button><button class="toggle-btn px-2 py-2" data-val="chi">Chinese +2</button><button class="toggle-btn px-2 py-2" data-val="ind">Indian</button><button class="toggle-btn px-2 py-2" data-val="oth">Others</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Serum albumin</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="alb"><button class="toggle-btn px-4 py-2" data-val="30">≥ 30g/L +1</button><button class="toggle-btn px-4 py-2" data-val="low">< 30g/L</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Valvular heart disease</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="vhd"><button class="toggle-btn px-4 py-2" data-val="no">No +1</button><button class="toggle-btn px-4 py-2" data-val="yes">Yes</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm text-left leading-tight">DM with microvascular complications</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="dm"><button class="toggle-btn px-4 py-2" data-val="no">No +4</button><button class="toggle-btn px-4 py-2" data-val="yes">Yes</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Hyperthyroidism</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="hyp"><button class="toggle-btn px-4 py-2" data-val="no">No +1</button><button class="toggle-btn px-4 py-2" data-val="yes">Yes</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Day of first INR assessment</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="day1"><button class="toggle-btn px-4 py-2" data-val="7">≤ 7 days +1</button><button class="toggle-btn px-4 py-2" data-val="late">> 7 days</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">First INR value</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="val1"><button class="toggle-btn px-4 py-2" data-val="15">≥ 1.5 +1</button><button class="toggle-btn px-4 py-2" data-val="low">< 1.5</button></div>
                </div>
            </div>
            <div class="lg:col-span-1 bg-slate-50 rounded-lg p-6 flex flex-col justify-center items-center text-center border">
                <h3 class="font-semibold text-slate-500 uppercase tracking-wider text-xs">Total Score</h3>
                <div id="w6-score" class="text-7xl font-bold text-slate-400 my-3">0</div>
                <div id="w6-desc" class="font-semibold text-lg">...</div>
                <p class="text-[10px] text-slate-500 mt-4 leading-tight font-medium">A total score of 8 or more suggests "Likely stable INR within 6 months".</p>
            </div>
        </div>
    </div>

    <!-- W-STAB 12 MONTHS -->
    <div id="wstab12-page" class="calculator-page flex-col w-full max-w-3xl bg-white shadow-xl rounded-xl border border-slate-200 overflow-hidden">
        <header class="p-6 md:p-8 text-center border-b border-slate-200 relative">
            <button onclick="showPage('main-menu')" class="absolute left-6 top-8 text-blue-600 hover:underline text-sm font-bold uppercase">&larr; Hub</button>
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 uppercase">W-STAB 12 Score</h1>
            <p class="mt-2 text-base text-slate-600 italic font-bold leading-tight">INR Stabilisation at 12 Months</p>
            <p class="mt-4 text-sm text-slate-500">
                <strong class="text-amber-500">Disclaimer:</strong> This is an educational tool. The score is illustrative and <strong class="text-red-500">NOT</strong> a medical diagnosis. Always consult a healthcare professional.
            </p>
        </header>
        <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-4" data-calc="w12">
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Age category</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="age"><button class="toggle-btn px-4 py-2" data-val="60">< 60 years +1</button><button class="toggle-btn px-4 py-2" data-val="old">≥ 60 years</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Alcohol drinking</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="alc"><button class="toggle-btn px-4 py-2" data-val="no">No +3</button><button class="toggle-btn px-4 py-2" data-val="yes">Yes</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">Heart failure</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-xs" data-var="hf"><button class="toggle-btn px-4 py-2" data-val="no">No +2</button><button class="toggle-btn px-4 py-2" data-val="yes">Yes</button></div>
                </div>
                <div class="flex justify-between items-center"><span class="text-slate-600 font-medium text-sm">eGFR category</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-[10px]" data-var="egfr"><button class="toggle-btn px-2 py-2" data-val="30">< 30</button><button class="toggle-btn px-2 py-2" data-val="3059">30-59 +1</button><button class="toggle-btn px-2 py-2" data-val="60">≥ 60 +2</button></div>
                </div>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0 text-left leading-tight"><span class="text-slate-600 font-medium text-xs">Total warfarin dose/week to reach 1st INR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="dose"><button class="toggle-btn px-4 py-2" data-val="20">< 20mg/wk +1</button><button class="toggle-btn px-4 py-2" data-val="high">≥ 20mg/wk</button></div>
                </div>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center space-y-2 sm:space-y-0 text-left leading-tight"><span class="text-slate-600 font-medium text-xs">Total days to achieve the 1st therapeutic INR</span>
                    <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm" data-var="days"><button class="toggle-btn px-2 py-2" data-val="14">≤ 14 days</button><button class="toggle-btn px-2 py-2" data-val="15">15-28 days +3</button><button class="toggle-btn px-2 py-2" data-val="late">> 28 days</button></div>
                </div>
            </div>
            <div class="lg:col-span-1 bg-slate-50 rounded-lg p-6 flex flex-col justify-center items-center text-center border">
                <h3 class="font-semibold text-slate-500 uppercase tracking-wider text-xs">Total Score</h3>
                <div id="w12-score" class="text-7xl font-bold text-slate-400 my-3">0</div>
                <div id="w12-desc" class="font-semibold text-lg">...</div>
                <p class="text-[10px] text-slate-500 mt-4 leading-tight font-medium">A total score of 6 or more suggests "Likely stable INR within 12 months".</p>
            </div>
        </div>
    </div>

    <!-- HUB FOOTER -->
    <footer class="text-center text-slate-500 text-xs mt-6 pb-4">
        <button onclick="openModal('disclaimerHubModal')" class="text-blue-600 hover:underline mb-2 font-medium">View Hub Disclaimer</button>
        <br>
        &copy; Sharifah Nadiah 2025. For demonstration purpose only.
    </footer>

    <!-- MODAL: Dose Info -->
    <div id="doseInfoModal" class="fixed inset-0 bg-slate-600 bg-opacity-75 flex items-center justify-center p-4 modal opacity-0 pointer-events-none z-50">
        <div class="modal-content bg-white p-6 md:p-8 rounded-xl shadow-xl w-full max-w-md border border-slate-200 transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-blue-700">Initial Warfarin Dose Definitions</h2>
                <button onclick="closeModal('doseInfoModal')" class="text-slate-400 hover:text-slate-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="text-slate-600 space-y-3 text-sm">
                <p><strong class="font-semibold text-slate-800">Low dose:</strong> &lt; 3mg/day or 5mg/3mg/3mg (3-day loading)</p>
                <p><strong class="font-semibold text-slate-800">High dose:</strong> ≥ 3mg/day or 5mg/5mg/3mg (3-day loading)</p>
            </div>
        </div>
    </div>

    <!-- MODAL: Hub Disclaimer -->
    <div id="disclaimerHubModal" class="fixed inset-0 bg-slate-900/60 flex items-center justify-center p-4 modal opacity-0 pointer-events-none z-50">
        <div class="modal-content bg-white p-8 rounded-2xl shadow-2xl w-full max-w-lg border border-slate-200 transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-blue-700 uppercase">Hub Disclaimer</h2>
                <button onclick="closeModal('disclaimerHubModal')" class="text-slate-400 hover:text-slate-600">&times;</button>
            </div>
            <div class="text-slate-600 text-sm space-y-4 leading-relaxed max-h-80 overflow-y-auto pr-2">
                <ul class="list-disc list-inside space-y-3">
                    <li class="text-justify">This hub provides access to risk score calculators intended for informational and educational purposes only.</li>
                    <li class="text-justify">Calculations are based on predictive models (PRE-TTR, W-STAB, CARIA<sub>2</sub>, FACT-RED) and should not replace professional medical judgment.</li>
                    <li class="text-justify">The developers assume no responsibility for medical decisions made using this tool.</li>
                </ul>
            </div>
            <button onclick="closeModal('disclaimerHubModal')" class="w-full mt-8 bg-blue-700 text-white py-3 rounded-xl font-bold transition-colors hover:bg-blue-800">I Understand</button>
        </div>
    </div>

    <script>
        // PAGE NAVIGATION
        function showPage(id) {
            document.querySelectorAll('.calculator-page, #main-menu').forEach(p => p.classList.remove('active-page'));
            document.getElementById(id).classList.add('active-page');
            window.scrollTo(0, 0);
        }

        // MODAL LOGIC
        function openModal(id) {
            const m = document.getElementById(id);
            m.classList.remove('opacity-0', 'pointer-events-none');
            m.querySelector('.modal-content').classList.remove('scale-95');
        }
        function closeModal(id) {
            const m = document.getElementById(id);
            m.classList.add('opacity-0');
            m.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => m.classList.add('pointer-events-none'), 250);
        }

        // STATE INITIALIZATION
        const state = {
            prettr: { dm: 'present', stroke: 'yes', thyroid: 'yes', dose: 'low', days: '28', weekdose: '20' },
            w6: { eth: 'ind', alb: 'low', vhd: 'yes', dm: 'yes', hyp: 'yes', day1: 'late', val1: 'low' },
            w12: { age: 'old', alc: 'yes', hf: 'yes', egfr: '30', dose: 'high', days: '14' },
            caria: { cad: 'no', age: 'young', egfr: 'high', stab: 'yes', asthma: 'no' },
            factred: { gender: '0', anti: '0', plat: '0', dose: '0', renal: '0', eth: '0', regimen: '0' }
        };

        // CALCULATION LOGIC
        function updatePrettr() {
            let s = 0;
            if (state.prettr.dm === 'no') s += 1;
            if (state.prettr.stroke === 'no') s += 1;
            if (state.prettr.thyroid === 'no') s += 2;
            if (state.prettr.dose === 'high') s += 1;
            if (state.prettr.days === '14') s += 1;
            else if (state.prettr.days === '15') s += 2;
            if (state.prettr.weekdose === 'yes') s += 1;
            const el = document.getElementById('prettr-score');
            const desc = document.getElementById('prettr-desc');
            el.innerText = s;
            if (s >= 5) {
                el.className = "text-7xl font-bold my-3 text-green-600";
                desc.innerText = "Likely TTR ≥ 70%";
                desc.className = "font-semibold text-lg text-green-600";
            } else {
                el.className = "text-7xl font-bold my-3 text-orange-600";
                desc.innerText = "Less likely TTR ≥ 70%";
                desc.className = "font-semibold text-lg text-orange-600";
            }
        }

        function updateW6() {
            let s = 0;
            if (state.w6.eth === 'mal') s += 1;
            else if (state.w6.eth === 'chi') s += 2;
            if (state.w6.alb === '30') s += 1;
            if (state.w6.vhd === 'no') s += 1;
            if (state.w6.dm === 'no') s += 4;
            if (state.w6.hyp === 'no') s += 1;
            if (state.w6.day1 === '7') s += 1;
            if (state.w6.val1 === '15') s += 1;
            const el = document.getElementById('w6-score');
            const desc = document.getElementById('w6-desc');
            el.innerText = s;
            if (s >= 8) {
                el.className = "text-7xl font-bold my-3 text-green-600";
                desc.innerText = "Likely stable INR within 6 months";
                desc.className = "font-semibold text-lg text-green-600 leading-tight";
            } else {
                el.className = "text-7xl font-bold my-3 text-orange-600";
                desc.innerText = "Less likely stable INR within 6 months";
                desc.className = "font-semibold text-lg text-orange-600 leading-tight";
            }
        }

        function updateW12() {
            let s = 0;
            if (state.w12.age === '60') s += 1;
            if (state.w12.alc === 'no') s += 3;
            if (state.w12.hf === 'no') s += 2;
            if (state.w12.egfr === '3059') s += 1;
            else if (state.w12.egfr === '60') s += 2;
            if (state.w12.dose === '20') s += 1;
            if (state.w12.days === '15') s += 3;
            const el = document.getElementById('w12-score');
            const desc = document.getElementById('w12-desc');
            el.innerText = s;
            if (s >= 6) {
                el.className = "text-7xl font-bold my-3 text-green-600";
                desc.innerText = "Likely stable INR within 12 months";
                desc.className = "font-semibold text-lg text-green-600 leading-tight";
            } else {
                el.className = "text-7xl font-bold my-3 text-orange-600";
                desc.innerText = "Less likely stable INR within 12 months";
                desc.className = "font-semibold text-lg text-orange-600 leading-tight";
            }
        }

        function updateCaria() {
            let s = 0;
            if (state.caria.cad === 'yes') s += 1;
            if (state.caria.age === '60') s += 1;
            if (state.caria.egfr === 'low') s += 1;
            if (state.caria.stab === 'no') s += 1;
            if (state.caria.asthma === 'yes') s += 2;
            const el = document.getElementById('caria-score');
            const desc = document.getElementById('caria-desc');
            el.innerText = s;
            if (s >= 2) {
                el.className = "text-7xl font-bold my-3 text-red-600";
                desc.innerText = "Likely high stroke risk";
                desc.className = "font-semibold text-lg text-red-600";
            } else {
                el.className = "text-7xl font-bold my-3 text-green-600";
                desc.innerText = "Less likely stroke risk";
                desc.className = "font-semibold text-lg text-green-600";
            }
        }

        function updateFactred() {
            let s = 0;
            s += parseInt(state.factred.gender);
            s += parseInt(state.factred.anti);
            s += parseInt(state.factred.plat);
            s += parseInt(state.factred.dose);
            s += parseInt(state.factred.renal);
            s += parseInt(state.factred.eth);
            s += parseInt(state.factred.regimen);
            const el = document.getElementById('factred-score');
            const desc = document.getElementById('factred-desc');
            el.innerText = s;
            if (s >= 5) {
                el.className = "text-7xl font-bold my-3 text-red-600";
                desc.innerText = "Likely high bleeding risk";
                desc.className = "font-semibold text-lg text-red-600";
            } else {
                el.className = "text-7xl font-bold my-3 text-green-600";
                desc.innerText = "Less likely bleeding risk";
                desc.className = "font-semibold text-lg text-green-600";
            }
        }

        // INITIALIZE ALL
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('[data-calc]').forEach(container => {
                const calcId = container.dataset.calc;
                container.querySelectorAll('[data-var]').forEach(group => {
                    const varName = group.dataset.var;
                    const buttons = group.querySelectorAll('.toggle-btn');
                    buttons.forEach(btn => {
                        if (btn.dataset.val === state[calcId][varName]) btn.classList.add('active');
                        btn.addEventListener('click', () => {
                            state[calcId][varName] = btn.dataset.val;
                            buttons.forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            if (calcId === 'prettr') updatePrettr();
                            if (calcId === 'w6') updateW6();
                            if (calcId === 'w12') updateW12();
                            if (calcId === 'caria') updateCaria();
                            if (calcId === 'factred') updateFactred();
                        });
                    });
                });
            });
            updatePrettr(); updateW6(); updateW12(); updateCaria(); updateFactred();
        });
    </script>
</body>
</html>